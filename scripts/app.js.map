{"version":3,"sources":["literature.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["(function () {\r\n\t\"use strict\";\r\n\r\n\tfunction isDash() {\r\n\t\tif (document.querySelector('.literature__dash').checked) {\r\n\t\t\treturn '&#8212';\r\n\t\t} else {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t}\r\n\r\n\tfunction normalize(block) {\r\n\t\tlet inputs = block.querySelectorAll('input');\r\n\r\n\t\tinputs.forEach(function (item) {\r\n\t\t\titem.value = '';\r\n\t\t});\r\n\t\tblock.querySelector('.side__checkbox').checked = false;\r\n\t}\r\n\r\n\tfunction createAuthors(arr) { //функция создания списка авторов с фамилией и инициалами\r\n\t\tfunction Separate(name) { //формирует объект с фамилией и инициалами\r\n\t\t\tlet arr = name.split(' ');\r\n\t\t\tthis.surname = arr[0];\r\n\t\t\tthis.initials = arr[1];\r\n\t\t};\r\n\r\n\t\tlet arrNames = arr.split(', '); // создает массив авторов полученных из инпута\r\n\t\tlet authors = []; //массив объектов содержащих фамилию и инициалы \r\n\r\n\t\tarrNames.forEach(function (item) {\r\n\t\t\tlet author = new Separate(item);\r\n\t\t\tauthors.push(author);\r\n\t\t});\r\n\r\n\t\treturn authors;\r\n\t}\r\n\r\n\tfunction checkCity(city) {\r\n\t\tlet cityArr = [{\r\n\t\t\t\tname: \"москва\",\r\n\t\t\t\tabb: \"М.\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"санкт-петербург\",\r\n\t\t\t\tabb: \"СПб.\",\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\tlet check = city.toLowerCase();\r\n\r\n\t\tcityArr.forEach(function (item) {\r\n\t\t\tconsole.log(city);\r\n\t\t\tif (item.name == check) {\r\n\t\t\t\tcity = item.abb;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn city;\r\n\t}\r\n\r\n\t(function isBook() {\r\n\t\tlet book = document.querySelector('.book');\r\n\t\tlet bookButton = book.querySelector('.side__button');\r\n\r\n\r\n\r\n\r\n\r\n\t\tbookButton.addEventListener('click', function (e) {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tlet dash = isDash();\r\n\r\n\t\t\tlet arrAuthors = book.querySelector('.js_name').value;\r\n\t\t\tif (!arrAuthors) {\r\n\t\t\t\treturn alert(\"Введите хотя-бы одного автора\");\r\n\t\t\t}\r\n\r\n\t\t\tlet authors = createAuthors(arrAuthors);\r\n\r\n\t\t\tlet title = book.querySelector('.js_title').value;\r\n\t\t\tif (!title) {\r\n\t\t\t\treturn alert(\"Введите название книги\");\r\n\t\t\t}\r\n\r\n\t\t\tlet city = book.querySelector('.js_city').value;\r\n\t\t\tif (!city) {\r\n\t\t\t\treturn alert(\"Введите город издателя\");\r\n\t\t\t}\r\n\t\t\tcity = checkCity(city);\r\n\r\n\r\n\t\t\tlet publisher = book.querySelector('.js_publisher').value;\r\n\t\t\tif (!publisher) {\r\n\t\t\t\treturn alert(\"Введите название издателя\");\r\n\t\t\t}\r\n\r\n\t\t\tlet year = book.querySelector('.js_year').value;\r\n\t\t\tif (!year) {\r\n\t\t\t\treturn alert(\"Введите год издания\");\r\n\t\t\t}\r\n\r\n\t\t\tlet pages = book.querySelector('.js_pages').value;\r\n\t\t\tif (!pages) {\r\n\t\t\t\treturn alert(\"Введите количество страниц в книге\");\r\n\t\t\t}\r\n\r\n\t\t\tlet bookCheck = book.querySelector('.side__checkbox').checked;\r\n\t\t\tlet reference = \"\";\r\n\r\n\r\n\t\t\tif (bookCheck && authors.length >= 3) {\r\n\t\t\t\treference = `${authors[0].surname}, ${authors[0].initials} ${title} / ${authors[0].initials} ${authors[0].surname}, ${authors[1].initials} ${authors[1].surname}, ${authors[2].initials} ${authors[2].surname} [и др.]. ${dash} ${city}: ${publisher}, ${year} . ${dash} ${pages} с.`;\r\n\t\t\t} else if (!bookCheck && authors.length <= 3) {\r\n\t\t\t\tswitch (authors.length) {\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\treference = `${authors[0].surname}, ${authors[0].initials} ${title} / ${authors[0].initials} ${authors[0].surname}. ${dash} ${city}: ${publisher}, ${year}. ${dash} ${pages} с.`;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\treference = `${authors[0].surname}, ${authors[0].initials} ${title} / ${authors[0].initials} ${authors[0].surname}, ${authors[1].initials} ${authors[1].surname}. ${dash} ${city}: ${publisher}, ${year}. ${dash} ${pages} с.`;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\treference = `${authors[0].surname}, ${authors[0].initials} ${title} / ${authors[0].initials} ${authors[0].surname}, ${authors[1].initials} ${authors[1].surname}, ${authors[2].initials} ${authors[2].surname}. ${dash} ${city}: ${publisher}, ${year}. ${dash} ${pages} с.`;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn alert(\"Необходимо написать первых 3х авторов\");\r\n\t\t\t}\r\n\r\n\t\t\tarrBook.push(reference);\r\n\t\t\tarrBook.sort();\r\n\t\t\tnormalize(book);\r\n\r\n\t\t\trenderList();\r\n\t\t});\r\n\r\n\t})();\r\n\r\n\tfunction renderList() { //выводит готовый список в блок вывода\r\n\t\tarrList.splice(0, arrList.length);\r\n\t\tarrList = arrList.concat(arrBook);\r\n\r\n\t\twhile (outputList.firstChild) {\r\n\t\t\toutputList.removeChild(outputList.firstChild);\r\n\t\t}\r\n\r\n\t\tfor (let i = 0; i < arrList.length; i++) {\r\n\t\t\tlet li = document.createElement('li');\r\n\t\t\tli.innerHTML = arrList[i];\r\n\t\t\toutput.querySelector('.output__list').appendChild(li);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tlet source = document.querySelector('.literature__choice'); //селект\r\n\tlet output = document.querySelector('.output'); // блок вывода \r\n\tlet outputList = output.querySelector('.output__list');\r\n\tlet writes = document.querySelectorAll('.js_write'); // список блоков-источников\r\n\tlet arrList = []; // основной списик\r\n\tlet arrBook = []; // список по книгам\r\n\r\n\r\n\tsource.addEventListener('change', function () { //смена блока-источника по выбору из списка\r\n\t\twrites.forEach(function (item) {\r\n\t\t\titem.style.display = \"none\";\r\n\t\t});\r\n\r\n\t\twrites[source.selectedIndex].style.display = \"block\";\r\n\t});\r\n\r\n\r\n\r\n}());\r\n"]}